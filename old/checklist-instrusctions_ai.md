# Custom Checklist Execution Rules

1. **Confirm instructions first**
   - Перед любой проверкой явно вывести строку  
     `Подтверждение инструкций — [./.cursor/checklist-instrusctions.md#L1](./.cursor/checklist-instrusctions.md#L1)`
   - Убедиться, что файл инструкций прочитан полностью перед дальнейшими действиями.

2. **Режим детализации**
   - Если параметр `detailedReport` не передан или равен `1`, выполняются правила пунктов 3–9 без изменений.
   - Если команда запущена с `detailedReport=0`, действует упрощённый режим:
     - Выполнить все проверки типа A, затем типа B, кратко описав команды и статусы без индивидуальных блоков.
     - После завершения A/B сформировать todo только для актуальных пунктов типа C (исключить неприменимые, например GraphQL-пункты при REST).
     - Для пунктов типа C всё равно соблюдать детальный отчёт из пункта 5 и правила todo из пункта 3.

3. **Todo-список (всегда для detailedReport=1; при detailedReport=0 — только после этапа A/B для пункта 2)**
   - Создать todo с тремя подготовительными задачами и пунктами чеклиста (п.1…N) + «Общая отчётность».
   - Держать не более одной задачи `in_progress`, менять статус строго по порядку.

4. **Перед каждой серией проверок**
   - Сообщать, REST или GraphQL. Если GraphQL отсутствует, явно указывать это и помечать соответствующие пункты как пропущенные.

5. **Структура отчёта по пункту**
   - Обязательна для всех пунктов при detailedReport=1 и для всех пунктов типа C при detailedReport=0.
   - Формат блока:
     ```
     Проверяю пункт X (тип …) — [./.cursor/checklist.md#L<номер>](./.cursor/checklist.md#L<номер>)
     Запускаю команду `<команда>`
     Результат: …
     Статус: ✅/❌/⏭️ (причина)
     ```
   - Если требуется несколько команд — повторять строки `Запускаю команду …` и фиксировать результат после каждой.
   - Для неприменимых пунктов всё равно указывать причину внутри блока.

6. **Команды**
   - Перед любым вызовом `run_terminal_cmd`/`read_file`/`read_lints` писать `Запускаю команду \`...\`` и сразу после — результат.
   - Для `read_file` перечислять файлы явно.

7. **Типы проверок**
   - Тип A: единичный запуск команды на весь набор файлов (например, `read_lints`).
   - Тип B: `grep` по изменённым файлам.
   - Тип C: чтение файлов целиком без ограничений по строкам и анализ контекста.

8. **Пропуски**
   - Если пункт неприменим, указывать точную причину (например, «GraphQL отсутствует», «.helm нет», «Пункт пустой»).

9. **Финальный отчёт**
   - При detailedReport=1: перечислить все пункты с маркерами ✅/❌/⏭️ и описать выявленные нарушения с рекомендациями.
   - При detailedReport=0: дать краткое резюме для типов A/B и полный свод по типу C (с отмеченными пунктами и рекомендациями).
