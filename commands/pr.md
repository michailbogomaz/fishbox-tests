---
description: Создание PR с одним squash-коммитом
---

# Команда pr

## Параметры

- `message={text}` — сообщение коммита (необязательный)

## Алгоритм

1. git add ./
2. git commit -m 'cursor local commit'
3. Определить текущую ветку (например, FBD-88 или FBD-88_5)
4. Извлечь базовое имя ветки (без суффикса \_N): FBD-88_5 → FBD-88
5. Если `message` не указан:
   - Проанализировать изменения (git diff, изменённые файлы)
   - Сгенерировать краткое описание на английском
   - Предложить: "Предлагаю сообщение: {text}. Подтвердите или укажите своё."
   - Дождаться подтверждения
6. Найти все ветки вида {base}\_N и определить max(N)
   - Если нет — новый индекс = 1
   - Иначе — новый индекс = max(N) + 1
7. Создать ветку {base}\_N от origin/main
8. `git merge --squash {исходная_ветка}`
9. `git commit -m '{base} : {message}'`
10. `git push origin {новая_ветка}`
11. Открыть ссылку для создания PR в браузере: `open "{url}"`

## Примеры

```
run command pr message=Add entity catches aggregation endpoint
run command pr
```
